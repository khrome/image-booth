<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/wired-elements@0.9.2/dist/wired-elements.bundled.js"></script>
    <link rel="stylesheet" href="demo.css">
    <title>Image Editor Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&family=Architects+Daughter&display=swap" rel="stylesheet">
    <script src="
        https://cdn.jsdelivr.net/npm/wolfy87-eventemitter@5.2.9/EventEmitter.min.js
    "></script>
    <script src="
      https://cdn.jsdelivr.net/npm/@material/mwc-icon@0.27.0/mwc-icon.min.js
    "></script>
    <link rel="stylesheet" href="https://unpkg.com/window-engine@latest/dist/window-engine.min.css">
    <script src="https://unpkg.com/color-disc@1.0.1/dist/color-disc.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/toolcool-color-picker@1.0.15/dist/toolcool-color-picker.min.js"></script>
    <script src="https://unpkg.com/color-picker-web-component"></script>
    <script src="
        http://localhost:8000/node_modules/file-saver/dist/FileSaver.js
    "></script>
  </head>
  <body>
    <div id="screen" style="top:0px;left:0px; display:none; position:fixed; width: 100%; height: 100%; background-color: rgba(40, 40, 40, 0.5)"></div>
    <script type="importmap">
        {
            "imports": {
                "chai": "/node_modules/chai/chai.js",
                "environment-safe-chai": "/node_modules/environment-safe-chai/environment-safe-chai.js",
                "environment-safe-canvas": "/node_modules/environment-safe-canvas/environment-safe-canvas.js",
                "array-events/array-events.mjs": "/node_modules/array-events/array-events.mjs",
                "async-arrays/async-arrays.mjs": "/node_modules/async-arrays/async-arrays.mjs",
                "extended-emitter/extended-emitter.mjs": "/node_modules/extended-emitter/extended-emitter.mjs",
                "extended-emitter-es6": "/node_modules/extended-emitter-es6/extended-emitter-es6.js",
                
                "sift": "/node_modules/sift/es5m/index.js",
                "browser-or-node": "/node_modules/browser-or-node/src/index.js",
                "module": "/node_modules/browser-or-node/src/index.js",
                "node:events": "/node_modules/extended-emitter/node-events.mjs"
            }
        }
    </script>
    <script type="module" src="demo.js"></script>
    <div class="windowGroup">
      <wired-card id="window1" style="position: fixed; top: 20px; left: 20px;">
        <div id="toolbarContents" style="padding:10px; width: 220px; height: 90px">
          
        </div>
        <hr/>
        <table>
          <tr>
            <td><mwc-icon>filter_alt</mwc-icon></td>
            <td>
              <wired-combo id="operations" style="font-size: 0.7em">
              </wired-combo>
            </td>
          </tr>
        </table>
        <wired-divider class="wired-renderer"></wired-divider>
        <div id="brushDiv" style="position:absolute; margin-left: 80px; font-size: 0.7em">
          <br/><label>Brush</label><br/>
          <wired-combo id="brushes" role="combobox" aria-expanded="false" aria-haspopup="listbox" class="wired-rendered"></wired-combo>
        </div>
        <div style="height:100px; padding-left:5px; padding-top:5px">
          <toolcool-color-picker
            id="background-color"
            style="position:absolute; "
            button-width="3rem"
            button-height="3rem"
            button-padding="3px" 
            color="#000000"
          ></toolcool-color-picker>
          <toolcool-color-picker 
            id="foreground-color"
            style="position:absolute; margin-top: 1.5rem; margin-left: 1.5rem"
            button-width="3rem"
            button-height="3rem"
            button-padding="3px" 
            color="#FFFFFF"
          ></toolcool-color-picker>
          <mwc-icon id="color-switch" style="padding-top:50px" >change_circle</mwc-icon>
        </div>
        <wired-tabs selected="Wheel" style=" background-color: #FEFEFE;">
          <wired-tab name="Wheel">
            <color-disc size="200" format="hex" id="wheel"></color-disc>
            <div style="height:200px"></div>
          </wired-tab>
          <wired-tab name="Picker">
            <color-picker 
              id="picker"
              style="width: 200px; font-size: 0.7em" 
              formats="hex"
              selectedformat="hex"
            ></color-picker>
          </wired-tab>
          <wired-tab name="Palette">
            No palette 
          </wired-tab>
        </wired-tabs>
        <p style="position:absolute; margin-top: -8px; font-size: 0.8em">Â©2013-2023 Abbey Hawk Sparrow</p>
      </wired-card>
      <wired-dialog id="window2" style="position:fixed">
        <img 
          id="filterSpinner"
          alt="working..."
          src="images/loading.gif" 
          width="50" style="position:absolute; display:none; margin-top:10px; margin-left:10px">
        <div id="filterContents">
          
        </div>
      </wired-dialog>
    </div>
    <img 
      id="working"
      alt="working..."
      src="images/loading.gif" 
      width="50" style="position:absolute; display:none; margin-top:10px; margin-left:10px">
    <canvas class="surface" id="image"></canvas>
    <script type="module">
        
        import { windrag } from 'https://cdn.jsdelivr.net/npm/windrag';
        const window1 = windrag.create('#window1', '#window1', {
          position: 'fixed',
          display:'none'
        });
        const window2 = windrag.create('#window2', '#window2');
        const window1El = document.getElementById('window1');
        let lastLeft = null;
        let lastWidth = null;
        let lastTop = null;
        let lastHeight = null;
        setTimeout(()=>{
          let width = window.innerWidth;
          let height = window.innerHeight;
          const style = window.getComputedStyle(window1El);
          const window1Width = parseInt(style.width);
          const window1Height = parseInt(style.height);
          //console.log( height, window1Height , parseInt(style.width));
          //window1El.style.top = (height - (10 + window1Height))+'px';
          //window1El.style.left = (width - (10 + window1Width))+'px';
          window1El.style.display = 'fixed';
        }, 0);
        //*/
    </script>
  </body>
</html>